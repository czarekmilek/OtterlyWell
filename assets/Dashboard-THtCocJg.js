import{j as e,m,a as j,r as n,b as g,C as M,W as D,c as I,T as F,d as _,e as T,s as z,f as W,D as P}from"./index-CbrNP7Z6.js";import{L as p,C as L,u as S}from"./LinearMacroProgress-C14GQmvz.js";import{u as B,a as A}from"./useFitnessDaily-DCLQQzC5.js";import{F as E,a as N,u as K}from"./FinanceIOPeek-C-qrfRqx.js";import{u as O,T as R}from"./TaskColumn-DCSfuebF.js";import"./ConfirmDeleteDialog-QRNexnPa.js";function Y({goalCalories:s,totalCalories:t,goalProtein:r,goalFat:i,goalCarbs:o}){return e.jsxs(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-1 gap-6",children:[e.jsx(m.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.3},className:"h-full order-3 flex flex-col justify-center",children:e.jsxs("div",{className:"bg-brand-neutral-dark rounded-xl p-4 border border-brand-depth flex flex-col gap-3.5",children:[e.jsx("p",{className:"text-xs text-brand-secondary uppercase tracking-wider mb-2",children:"Makroskladniki"}),e.jsx(p,{label:"Białko",value:t.protein,goal:r,color:"var(--color-brand-primary)"}),e.jsx(p,{label:"Tłuszcz",value:t.fat,goal:i,color:"var(--color-brand-accent-1)"}),e.jsx(p,{label:"Węgle",value:t.carbs,goal:o,color:"var(--color-brand-accent-2)"})]})}),e.jsx(m.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",duration:.8},className:"order-1 overflow-visible flex items-center justify-center pointer-events-none sm:-mt-7",children:e.jsx(L,{consumed:t.kcal,goal:s})})]},"stats-view")}function Z(){const{user:s}=j(),t=n.useMemo(()=>new Date,[]),{goals:r,totalCalories:i}=S(s,t);return e.jsx(g,{to:"/calories",children:e.jsxs("div",{className:`flex flex-col bg-brand-neutral-dark/40 border border-brand-depth rounded-2xl p-4\r
                      overflow-hidden relative group cursor-pointer hover:bg-brand-neutral-dark/50 hover:scale-102\r
                      hover:shadow-lg transition-all duration-200`,children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h2",{className:"text-lg font-bold text-brand-neutral-light flex items-center gap-2",children:[e.jsx(M,{}),"Kalorie"]})}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsx("div",{className:"origin-center w-full",children:e.jsx(Y,{goalCalories:r.calories,totalCalories:i,goalProtein:r.protein,goalFat:r.fat,goalCarbs:r.carbs})})})]})})}function q({entries:s,selectedDate:t}){const{getDayPlan:r}=B(),[i,o]=n.useState(null),x=n.useMemo(()=>{const a=t.getDay();return a===0?0:a},[t]);n.useEffect(()=>{const a=r(x);o(a)},[x,r]);const f=n.useMemo(()=>{const a=new Set(s.map(u=>u.exercise_id)).size,l=s.reduce((u,d)=>u+(d.sets||0),0);return{workouts:a,sets:l}},[s]);return e.jsxs(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-1 gap-2",children:[e.jsxs(m.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},className:"bg-brand-neutral-dark p-4 border border-brand-depth rounded-xl flex flex-col justify-center",children:[e.jsx("p",{className:"text-xs text-brand-neutral-light/60 uppercase tracking-widest mb-1",children:"PLAN NA DZIŚ"}),i?e.jsxs("div",{className:"flex flex-col gap-2 text-center items-center justify-center h-full",children:[e.jsx("h3",{className:"text-lg font-bold text-brand-accent-2 line-clamp-2 leading-tight",children:i.name}),e.jsxs("span",{className:"text-xs text-brand-neutral-light/50 bg-brand-depth/50 px-2 py-0.5 rounded-full inline-block",children:[i.items?.length||0," ćwiczeń"]})]}):e.jsx("span",{className:"text-brand-neutral-light/30 italic text-sm text-center",children:"Brak planu"})]}),e.jsx(m.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},className:"bg-brand-neutral-dark p-4 border border-brand-depth rounded-xl flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-brand-neutral-light/70 uppercase tracking-wide mb-1",children:"Ćwiczenia • Serie"}),e.jsxs("p",{className:"text-2xl font-bold text-brand-accent-1",children:[f.workouts," ",e.jsx("span",{className:"text-brand-neutral-light/50",children:"•"})," ",e.jsx("span",{className:"text-brand-accent-3",children:f.sets})]})]})})]},"fitness-simplified-view")}function G(){const s=n.useMemo(()=>new Date,[]),{entries:t}=A(s);return e.jsx(g,{to:"/fitness",children:e.jsxs("div",{className:`flex flex-col bg-brand-neutral-dark/40 border border-brand-depth rounded-2xl p-4 overflow-hidden relative group\r
                    cursor-pointer hover:bg-brand-neutral-dark/50 hover:scale-102 hover:shadow-lg transition-all duration-200`,children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h2",{className:"text-lg font-bold text-brand-neutral-light flex items-center gap-2",children:[e.jsx(D,{}),"Treningi"]})}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsx("div",{className:"origin-center w-full",children:e.jsx(q,{entries:t,selectedDate:s})})})]})})}function H({stats:s,moneyLeft:t,totalBudget:r}){return e.jsxs(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-1 gap-2",children:[e.jsx("div",{className:"h-full order-1 flex flex-col justify-center",children:e.jsx(E,{moneyLeft:t,totalBudget:r})}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(N,{type:"income",amount:s.income}),e.jsx(N,{type:"expense",amount:s.expense})]})]},"finance-simplified-view")}function J(){j();const s=n.useMemo(()=>new Date,[]),{transactions:t,budgets:r}=K(),i=n.useMemo(()=>{const a=s.getMonth(),l=s.getFullYear();return t.filter(u=>{const d=new Date(u.date);return d.getMonth()===a&&d.getFullYear()===l})},[t,s]),o=n.useMemo(()=>i.reduce((a,l)=>(l.type==="income"?a.income+=l.amount:a.expense+=l.amount,a),{income:0,expense:0}),[i]),x=n.useMemo(()=>r.reduce((a,l)=>a+(l.amount||0),0),[r]),f=x-o.expense;return e.jsx(g,{to:"/finance",children:e.jsxs("div",{className:`flex flex-col bg-brand-neutral-dark/40 border border-brand-depth rounded-2xl p-4\r
                    overflow-hidden relative group cursor-pointer hover:bg-brand-neutral-dark/50 hover:scale-102 \r
                    hover:shadow-lg transition-all duration-200`,children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h2",{className:"text-lg font-bold text-brand-neutral-light flex items-center gap-2",children:[e.jsx(I,{}),"Finanse"]})}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsx("div",{className:"origin-center w-full",children:e.jsx(H,{stats:o,moneyLeft:f,totalBudget:x})})})]})})}function Q(){const{tasks:s,categories:t,toggleTaskCompletion:r,dismissTask:i,isLoading:o}=O(),{user:x}=j(),[f,a]=n.useState(0),[l,u]=n.useState(!0);n.useEffect(()=>{if(o)return;if(!x){u(!1);return}if(t.length===0){u(!1);return}(async()=>{const{data:v}=await z.from("profiles").select("default_task_category_id").eq("id",x.id).single();if(v?.default_task_category_id){const y=t.filter(b=>b.is_active).findIndex(b=>b.id===v.default_task_category_id);y!==-1&&a(y)}u(!1)})()},[t,x,o]);const d=n.useMemo(()=>t.filter(c=>c.is_active),[t]),h=d[f],k=()=>{a(c=>(c+1)%d.length)},w=()=>{a(c=>(c-1+d.length)%d.length)},C=n.useMemo(()=>h?s.filter(c=>c.category_id===h.id).filter(c=>!c.is_dismissed):[],[s,h]);return o||l?e.jsx("div",{className:"flex flex-col h-full bg-brand-neutral-dark/40 border border-brand-depth rounded-2xl p-4 items-center justify-center min-h-[160px]",children:e.jsx("div",{className:"text-brand-secondary animate-pulse text-center font-semibold",children:"Ładowanie zadań..."})}):d.length===0?e.jsx("div",{className:"flex flex-col h-full bg-brand-neutral-dark/40 border border-brand-depth rounded-2xl p-4",children:e.jsx("p",{className:"text-brand-secondary",children:"Brak kategorii zadań."})}):e.jsxs("div",{className:"flex flex-col bg-brand-neutral-dark/40 border border-brand-depth rounded-2xl p-4 overflow-hidden relative group",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(g,{to:"/tasks",children:e.jsxs("h2",{className:`text-lg font-bold text-brand-neutral-light flex items-center gap-2 hover:scale-105 \r
                        hover:text-brand-accent-1 transition-all duration-200 cursor-pointer`,children:[e.jsx(F,{}),"Zadania"]})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"flex items-center bg-brand-neutral-dark/50 rounded-lg p-0.5 border border-brand-depth",children:[e.jsx("button",{onClick:w,className:"flex items-center p-1 hover:text-brand-accent-1 transition-colors cursor-pointer",children:e.jsx(_,{})}),e.jsx("button",{onClick:k,className:"flex items-center p-1 hover:text-brand-accent-1 transition-colors cursor-pointer",children:e.jsx(T,{})})]})})]}),e.jsx(g,{to:"/tasks",children:e.jsx("div",{className:`flex-1 overflow-hidden rounded-2xl\r
        cursor-pointer hover:bg-brand-neutral-dark/30 hover:scale-102 hover:shadow-lg transition-all duration-200`,children:h&&e.jsx("div",{className:"h-full w-full pointer-events-none",children:e.jsx(R,{category:h,tasks:C,onComplete:r,onDismiss:i,allCategories:t,onEdit:()=>{},currentDate:new Date})})})})]})}const ae=()=>{const{visibleModules:s}=W();return Object.values(s).some(Boolean)?e.jsx("div",{className:"py-4 h-full flex flex-col",children:e.jsxs("div",{className:"columns-1 lg:columns-2 gap-3 sm:gap-6",children:[s.calories&&e.jsx("div",{className:"break-inside-avoid mb-3",children:e.jsx(Z,{})}),s.fitness&&e.jsx("div",{className:"break-inside-avoid mb-3",children:e.jsx(G,{})}),s.finance&&e.jsx("div",{className:"break-inside-avoid mb-3",children:e.jsx(J,{})}),s.tasks&&e.jsx("div",{className:"break-inside-avoid mb-3",children:e.jsx(Q,{})})]})}):e.jsx("div",{className:"py-6 lg:p-8 mx-auto space-y-3 h-full xl:h-[calc(100vh)] flex flex-col",children:e.jsx("div",{className:"flex-grow overflow-hidden",children:e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-brand-neutral-light/70 p-8 text-center bg-brand-neutral-dark/20 rounded-2xl border border-brand-depth border-dashed",children:[e.jsx(P,{className:"opacity-50 mb-2"}),e.jsx("h3",{className:"text-xl font-bold mb-2 text-brand-neutral-light",children:"Wszystkie moduły są ukryte."}),e.jsxs("p",{className:"max-w-md",children:["Przejdź do menu bocznego i kliknij"," ",e.jsx("strong",{children:'"Konfiguruj widok"'}),", aby dodać widgety."]})]})})})};export{ae as default};
