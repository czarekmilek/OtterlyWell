import{j as e,m as f,a as j,r,b as g,C as _,W as S,c as D,T as M,d as I,e as F,s as T,f as z,D as W}from"./index-Bol5J1mE.js";import{L as p,C as P,u as L}from"./LinearMacroProgress-CouFR-fe.js";import{u as B,a as A}from"./useFitnessDaily-D2EuADdY.js";import{F as E,a as N,u as O}from"./FinanceIOPeek-C3zqZLlZ.js";import{u as K,T as R}from"./TaskColumn-DK7rLU-r.js";import"./ConfirmDeleteDialog-NoZ2cG3R.js";function Y({goalCalories:t,totalCalories:a,goalProtein:n,goalFat:l,goalCarbs:c}){return e.jsxs(f.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-1 gap-6",children:[e.jsx(f.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.3},className:"h-full order-3 flex flex-col justify-center",children:e.jsxs("div",{className:"bg-brand-neutral-dark rounded-xl p-4 border border-brand-depth flex flex-col gap-3.5",children:[e.jsx("p",{className:"text-xs text-brand-secondary uppercase tracking-wider mb-2",children:"Makroskladniki"}),e.jsx(p,{label:"Białko",value:a.protein,goal:n,color:"var(--color-brand-primary)"}),e.jsx(p,{label:"Tłuszcz",value:a.fat,goal:l,color:"var(--color-brand-accent-1)"}),e.jsx(p,{label:"Węgle",value:a.carbs,goal:c,color:"var(--color-brand-accent-2)"})]})}),e.jsx(f.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",duration:.8},className:"order-1 overflow-visible flex items-center justify-center pointer-events-none sm:-mt-7",children:e.jsx(P,{consumed:a.kcal,goal:t})})]},"stats-view")}function Z(){const{user:t}=j(),a=r.useMemo(()=>new Date,[]),{goals:n,totalCalories:l}=L(t,a);return e.jsx(g,{to:"/calories",children:e.jsxs("div",{className:`flex flex-col bg-brand-neutral-dark/40 border border-brand-depth rounded-2xl p-4\r
                      overflow-hidden relative group cursor-pointer hover:bg-brand-neutral-dark/50 hover:scale-102\r
                      hover:shadow-lg transition-all duration-200`,children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h2",{className:"text-lg font-bold text-brand-neutral-light flex items-center gap-2",children:[e.jsx(_,{}),"Kalorie"]})}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsx("div",{className:"origin-center w-full",children:e.jsx(Y,{goalCalories:n.calories,totalCalories:l,goalProtein:n.protein,goalFat:n.fat,goalCarbs:n.carbs})})})]})})}function q({entries:t,selectedDate:a}){const{getDayPlan:n}=B(),[l,c]=r.useState(null),u=r.useMemo(()=>{const s=a.getDay();return s===0?0:s},[a]);r.useEffect(()=>{const s=n(u);c(s)},[u,n]);const i=r.useMemo(()=>{const s=new Set(t.map(o=>o.exercise_id)).size,d=t.reduce((o,h)=>o+(h.sets||0),0),m=t.length>0?t[t.length-1]:null;return{workouts:s,sets:d,lastSet:m}},[t]);return e.jsxs(f.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-1 gap-2",children:[e.jsxs(f.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},className:"bg-brand-neutral-dark p-4 border border-brand-depth rounded-xl flex flex-col justify-center",children:[e.jsx("p",{className:"text-xs text-brand-neutral-light/60 uppercase tracking-widest mb-1",children:"PLAN NA DZIŚ"}),l?e.jsxs("div",{className:"flex flex-col gap-2 text-center items-center justify-center h-full",children:[e.jsx("h3",{className:"text-lg font-bold text-brand-accent-2 line-clamp-2 leading-tight",children:l.name}),e.jsxs("span",{className:"text-xs text-brand-neutral-light/50 bg-brand-depth/50 px-2 py-0.5 rounded-full inline-block",children:[l.items?.length||0," ćwiczeń"]})]}):e.jsx("span",{className:"text-brand-neutral-light/30 italic text-sm text-center",children:"Brak planu"})]}),e.jsxs(f.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.4},className:"bg-brand-neutral-dark p-4 border border-brand-depth rounded-xl h-full flex flex-col justify-center min-h-[100px]",children:[e.jsx("p",{className:"text-xs text-brand-neutral-light/70 uppercase tracking-wide mb-2",children:"Ostatnia seria"}),i.lastSet?e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-lg font-bold text-brand-neutral-light line-clamp-1",children:i.lastSet.exercise?.name||"Nieznane ćwiczenie"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"text-xs text-brand-accent-1 bg-brand-accent-1/10 px-2 py-0.5 rounded",children:new Date(i.lastSet.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),i.lastSet.distance_km?e.jsxs("span",{className:"text-xs text-brand-accent-1 bg-brand-accent-1/10 px-2 py-0.5 rounded",children:[i.lastSet.distance_km," km x ",i.lastSet.duration_min," ","min"]}):i.lastSet.weight_kg?e.jsxs("span",{className:"text-xs text-brand-accent-1 bg-brand-accent-1/10 px-2 py-0.5 rounded",children:[i.lastSet.weight_kg," kg x ",i.lastSet.reps]}):e.jsxs("span",{className:"text-xs text-brand-accent-1 bg-brand-accent-1/10 px-2 py-0.5 rounded",children:[i.lastSet.duration_min," min"]})]})]}):e.jsx("span",{className:"text-brand-neutral-light/50 italic text-sm",children:"Brak aktywności"})]})]},"fitness-simplified-view")}function G(){const t=r.useMemo(()=>new Date,[]),{entries:a}=A(t);return e.jsx(g,{to:"/fitness",children:e.jsxs("div",{className:`flex flex-col bg-brand-neutral-dark/40 border border-brand-depth rounded-2xl p-4 overflow-hidden relative group\r
                    cursor-pointer hover:bg-brand-neutral-dark/50 hover:scale-102 hover:shadow-lg transition-all duration-200`,children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h2",{className:"text-lg font-bold text-brand-neutral-light flex items-center gap-2",children:[e.jsx(S,{}),"Treningi"]})}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsx("div",{className:"origin-center w-full",children:e.jsx(q,{entries:a,selectedDate:t})})})]})})}function H({stats:t,moneyLeft:a,totalBudget:n}){return e.jsxs(f.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-1 gap-2",children:[e.jsx("div",{className:"h-full order-1 flex flex-col justify-center",children:e.jsx(E,{moneyLeft:a,totalBudget:n})}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(N,{type:"income",amount:t.income}),e.jsx(N,{type:"expense",amount:t.expense})]})]},"finance-simplified-view")}function J(){j();const t=r.useMemo(()=>new Date,[]),{transactions:a,budgets:n}=O(),l=r.useMemo(()=>{const s=t.getMonth(),d=t.getFullYear();return a.filter(m=>{const o=new Date(m.date);return o.getMonth()===s&&o.getFullYear()===d})},[a,t]),c=r.useMemo(()=>l.reduce((s,d)=>(d.type==="income"?s.income+=d.amount:s.expense+=d.amount,s),{income:0,expense:0}),[l]),u=r.useMemo(()=>n.reduce((s,d)=>s+(d.amount||0),0),[n]),i=u-c.expense;return e.jsx(g,{to:"/finance",children:e.jsxs("div",{className:`flex flex-col bg-brand-neutral-dark/40 border border-brand-depth rounded-2xl p-4\r
                    overflow-hidden relative group cursor-pointer hover:bg-brand-neutral-dark/50 hover:scale-102 \r
                    hover:shadow-lg transition-all duration-200`,children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h2",{className:"text-lg font-bold text-brand-neutral-light flex items-center gap-2",children:[e.jsx(D,{}),"Finanse"]})}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsx("div",{className:"origin-center w-full",children:e.jsx(H,{stats:c,moneyLeft:i,totalBudget:u})})})]})})}function Q(){const{tasks:t,categories:a,toggleTaskCompletion:n,dismissTask:l,isLoading:c}=K(),{user:u}=j(),[i,s]=r.useState(0),[d,m]=r.useState(!0);r.useEffect(()=>{if(c)return;if(!u){m(!1);return}if(a.length===0){m(!1);return}(async()=>{const{data:v}=await T.from("profiles").select("default_task_category_id").eq("id",u.id).single();if(v?.default_task_category_id){const y=a.filter(b=>b.is_active).findIndex(b=>b.id===v.default_task_category_id);y!==-1&&s(y)}m(!1)})()},[a,u,c]);const o=r.useMemo(()=>a.filter(x=>x.is_active),[a]),h=o[i],k=()=>{s(x=>(x+1)%o.length)},w=()=>{s(x=>(x-1+o.length)%o.length)},C=r.useMemo(()=>h?t.filter(x=>x.category_id===h.id).filter(x=>!x.is_dismissed):[],[t,h]);return c||d?e.jsx("div",{className:"flex flex-col h-full bg-brand-neutral-dark/40 border border-brand-depth rounded-2xl p-4 items-center justify-center min-h-[160px]",children:e.jsx("div",{className:"text-brand-secondary animate-pulse text-center font-semibold",children:"Ładowanie zadań..."})}):o.length===0?e.jsx("div",{className:"flex flex-col h-full bg-brand-neutral-dark/40 border border-brand-depth rounded-2xl p-4",children:e.jsx("p",{className:"text-brand-secondary",children:"Brak kategorii zadań."})}):e.jsxs("div",{className:"flex flex-col bg-brand-neutral-dark/40 border border-brand-depth rounded-2xl p-4 overflow-hidden relative group",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(g,{to:"/tasks",children:e.jsxs("h2",{className:`text-lg font-bold text-brand-neutral-light flex items-center gap-2 hover:scale-105 \r
                        hover:text-brand-accent-1 transition-all duration-200 cursor-pointer`,children:[e.jsx(M,{}),"Zadania"]})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"flex items-center bg-brand-neutral-dark/50 rounded-lg p-0.5 border border-brand-depth",children:[e.jsx("button",{onClick:w,className:"flex items-center p-1 hover:text-brand-accent-1 transition-colors cursor-pointer",children:e.jsx(I,{})}),e.jsx("button",{onClick:k,className:"flex items-center p-1 hover:text-brand-accent-1 transition-colors cursor-pointer",children:e.jsx(F,{})})]})})]}),e.jsx(g,{to:"/tasks",children:e.jsx("div",{className:`flex-1 overflow-hidden rounded-2xl\r
        cursor-pointer hover:bg-brand-neutral-dark/30 hover:scale-102 hover:shadow-lg transition-all duration-200`,children:h&&e.jsx("div",{className:"h-full w-full pointer-events-none",children:e.jsx(R,{category:h,tasks:C,onComplete:n,onDismiss:l,allCategories:a,onEdit:()=>{},currentDate:new Date})})})})]})}const se=()=>{const{visibleModules:t}=z();return Object.values(t).some(Boolean)?e.jsx("div",{className:"py-4 h-full flex flex-col",children:e.jsxs("div",{className:"columns-1 lg:columns-2 gap-3 sm:gap-6",children:[t.calories&&e.jsx("div",{className:"break-inside-avoid mb-3",children:e.jsx(Z,{})}),t.fitness&&e.jsx("div",{className:"break-inside-avoid mb-3",children:e.jsx(G,{})}),t.finance&&e.jsx("div",{className:"break-inside-avoid mb-3",children:e.jsx(J,{})}),t.tasks&&e.jsx("div",{className:"break-inside-avoid mb-3",children:e.jsx(Q,{})})]})}):e.jsx("div",{className:"py-6 lg:p-8 mx-auto space-y-3 h-full xl:h-[calc(100vh)] flex flex-col",children:e.jsx("div",{className:"flex-grow overflow-hidden",children:e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-brand-neutral-light/70 p-8 text-center bg-brand-neutral-dark/20 rounded-2xl border border-brand-depth border-dashed",children:[e.jsx(W,{className:"opacity-50 mb-2"}),e.jsx("h3",{className:"text-xl font-bold mb-2 text-brand-neutral-light",children:"Wszystkie moduły są ukryte."}),e.jsxs("p",{className:"max-w-md",children:["Przejdź do menu bocznego i kliknij"," ",e.jsx("strong",{children:'"Konfiguruj widok"'}),", aby dodać widgety."]})]})})})};export{se as default};
