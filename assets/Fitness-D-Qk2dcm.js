import{r as s,j as e,l as A,z as W,i as E,k as D,D as P,a as M,s as y,S as _,m as U}from"./index-BseDcRp9.js";import{D as F}from"./DateSelector-BJduf_Le.js";import{C as R,A as S}from"./ConfirmDeleteDialog-BnB7wdqZ.js";import{m as v}from"./proxy-CBzavYgd.js";import{C as O}from"./CustomSelect-C6xNTApz.js";import{u as L,a as G}from"./useFitnessDaily-CZD5hQYL.js";const H=({isOpen:t,onClose:b,entry:r,onSave:m})=>{const[c,f]=s.useState(r.sets||0),[h,o]=s.useState(r.reps||0),[p,a]=s.useState(r.weight_kg||0),[n,w]=s.useState(r.duration_min||0),[x,i]=s.useState(r.distance_km||0);s.useEffect(()=>{t&&(f(r.sets||0),o(r.reps||0),a(r.weight_kg||0),w(r.duration_min||0),i(r.distance_km||0))},[r,t]);const g=async l=>{l.preventDefault();const d=r.exercise?.type||"strength";let j={};d==="strength"?j={sets:c,reps:h,weight_kg:p}:d==="cardio"?j={duration_min:n,distance_km:x}:d==="stretching"&&(j={duration_min:n}),await m(r.id,j),b()};return e.jsxs(A,{open:t,onClose:b,className:"relative z-50",children:[e.jsx("div",{className:"fixed inset-0 bg-brand-neutral-darker/70 backdrop-blur-sm","aria-hidden":"true"}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:e.jsxs(W,{className:"w-full max-w-sm rounded-2xl bg-brand-neutral-dark border border-brand-depth p-6 shadow-xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-brand-neutral-light",children:"Edytuj trening"}),e.jsx("button",{onClick:b,className:`flex items-center justify-center text-brand-neutral-light/60 hover:text-brand-neutral-light transition-colors cursor-pointer \r
                        hover:bg-brand-neutral-light/10 rounded-full p-1`,children:e.jsx(E,{})})]}),e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[r.exercise?.type==="strength"&&e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-brand-neutral-light/80 mb-1",children:"Serie"}),e.jsx("input",{type:"number",value:c,onChange:l=>f(Number(l.target.value)),className:"w-full px-3 py-2 bg-brand-neutral-dark/40 border border-brand-depth rounded-xl text-brand-neutral-light focus:outline-none focus:border-brand-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-brand-neutral-light/80 mb-1",children:"Powt."}),e.jsx("input",{type:"number",value:h,onChange:l=>o(Number(l.target.value)),className:"w-full px-3 py-2 bg-brand-neutral-dark/40 border border-brand-depth rounded-xl text-brand-neutral-light focus:outline-none focus:border-brand-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-brand-neutral-light/80 mb-1",children:"Waga (kg)"}),e.jsx("input",{type:"number",value:p,onChange:l=>a(Number(l.target.value)),className:"w-full px-3 py-2 bg-brand-neutral-dark/40 border border-brand-depth rounded-xl text-brand-neutral-light focus:outline-none focus:border-brand-primary"})]})]}),r.exercise?.type==="cardio"&&e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-brand-neutral-light/80 mb-1",children:"Czas (min)"}),e.jsx("input",{type:"number",value:n,onChange:l=>w(Number(l.target.value)),className:"w-full px-3 py-2 bg-brand-neutral-dark/40 border border-brand-depth rounded-xl text-brand-neutral-light focus:outline-none focus:border-brand-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-brand-neutral-light/80 mb-1",children:"Dystans (km)"}),e.jsx("input",{type:"number",value:x,onChange:l=>i(Number(l.target.value)),className:"w-full px-3 py-2 bg-brand-neutral-dark/40 border border-brand-depth rounded-xl text-brand-neutral-light focus:outline-none focus:border-brand-primary"})]})]}),r.exercise?.type==="stretching"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-brand-neutral-light/80 mb-1",children:"Czas (min)"}),e.jsx("input",{type:"number",value:n,onChange:l=>w(Number(l.target.value)),className:"w-full px-3 py-2 bg-brand-neutral-dark/40 border border-brand-depth rounded-xl text-brand-neutral-light focus:outline-none focus:border-brand-primary"})]}),e.jsx("div",{className:"pt-2",children:e.jsx("button",{type:"submit",className:"w-full py-2 bg-brand-accent-2 rounded-xl text-brand-neutral-light font-bold hover:bg-brand-accent-2/60 transition-all cursor-pointer",children:"Zapisz"})})]})]})})]})};function K({entry:t,onRemoveEntry:b,onEdit:r}){const[m,c]=s.useState(!1),[f,h]=s.useState(!1),o=()=>c(!0),p=()=>c(!1),a=()=>{b(t.id)},n=[{label:"Klatka",value:"chest"},{label:"Plecy",value:"back"},{label:"Nogi",value:"legs"},{label:"Barki",value:"shoulders"},{label:"Ramiona",value:"arms"},{label:"Brzuch",value:"core"},{label:"Cardio",value:"cardio"}];return e.jsxs(e.Fragment,{children:[e.jsxs(v.div,{layout:!0,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"mb-2 last:mb-0 bg-brand-neutral-dark border border-brand-depth rounded-lg p-3 group relative overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-start z-10 relative",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-brand-neutral-light text-lg",children:t.exercise?.name||"Nieznane ćwiczenie"}),e.jsxs("p",{className:"text-sm text-brand-neutral-light/70 uppercase tracking-wider",children:[t.exercise?.type==="strength"?`${n.find(w=>w.value===t.exercise?.muscle_group)?.label} • `:"",t.exercise?.type==="strength"?"Siłowe":t.exercise?.type==="stretching"?"Rozciąganie":"Cardio"]})]}),e.jsxs("div",{className:"flex sm:flex-row flex-col gap-1",children:[e.jsx("button",{onClick:()=>h(!0),className:`flex sm:order-1 order-2 sm:w-auto h-fit items-center justify-center rounded-full text-sm text-brand-neutral-light \r
                        hover:bg-brand-neutral-light/10 hover:text-brand-neutral-light\r
                        transition-colors duration-200 cursor-pointer p-1`,title:"Edytuj",children:e.jsx(D,{className:"scale-75"})}),e.jsx("button",{onClick:o,className:`flex sm:order-2 order-1 sm:w-auto h-fit items-center justify-center rounded-full text-sm text-brand-neutral-light \r
                        hover:bg-red-800/20 hover:border-red-500/30 hover:text-red-400\r
                        transition-colors duration-200 cursor-pointer p-1`,title:"Usuń",children:e.jsx(P,{className:"scale-75"})})]})]}),e.jsx("div",{className:"mt-3 flex gap-4",children:t.exercise?.type==="strength"?e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"bg-brand-depth/30 rounded px-2 py-1",children:[e.jsx("span",{className:"text-brand-accent-1 font-bold",children:t.sets}),e.jsx("span",{className:"text-xs text-brand-neutral-light/50 ml-1",children:"SERIE"})]}),e.jsxs("div",{className:"bg-brand-depth/30 rounded px-2 py-1",children:[e.jsx("span",{className:"text-brand-accent-1 font-bold",children:t.reps}),e.jsx("span",{className:"text-xs text-brand-neutral-light/50 ml-1",children:"POWT."})]}),e.jsxs("div",{className:"bg-brand-depth/30 rounded px-2 py-1",children:[e.jsx("span",{className:"text-brand-accent-1 font-bold",children:t.weight_kg}),e.jsx("span",{className:"text-xs text-brand-neutral-light/50 ml-1",children:"KG"})]})]}):t.exercise?.type==="cardio"?e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"bg-brand-depth/30 rounded px-2 py-1",children:[e.jsx("span",{className:"text-brand-accent-1 font-bold",children:t.duration_min}),e.jsx("span",{className:"text-xs text-brand-neutral-light/50 ml-1",children:"MIN"})]}),e.jsxs("div",{className:"bg-brand-depth/30 rounded px-2 py-1",children:[e.jsx("span",{className:"text-brand-accent-1 font-bold",children:t.distance_km}),e.jsx("span",{className:"text-xs text-brand-neutral-light/50 ml-1",children:"KM"})]})]}):e.jsx("div",{className:"flex gap-2",children:e.jsxs("div",{className:"bg-brand-depth/30 rounded px-2 py-1",children:[e.jsx("span",{className:"text-brand-accent-1 font-bold",children:t.duration_min}),e.jsx("span",{className:"text-xs text-brand-neutral-light/50 ml-1",children:"MIN"})]})})})]}),e.jsx(R,{isOpen:m,onClose:p,onConfirm:a,description:e.jsxs("p",{children:["Czy na pewno chcesz usunąć"," ",e.jsx("strong",{className:"text-brand-neutral-light",children:t.exercise?.name||"ćwiczenie"}),"? Tej akcji nie można cofnąć."]})}),e.jsx(H,{isOpen:f,onClose:()=>h(!1),entry:t,onSave:r})]})}function Z({entries:t,onRemoveEntry:b,isLoading:r,onEdit:m}){return r?e.jsx("div",{className:"flex-1 bg-brand-neutral-dark/50 border border-brand-depth rounded-xl p-4 flex items-center justify-center",children:e.jsx("p",{className:"text-brand-neutral-light/50",children:"Ładowanie treningów..."})}):t.length===0?e.jsx("div",{className:"flex-1 bg-brand-neutral-dark/50 border border-brand-depth rounded-xl p-4 flex items-center justify-center",children:e.jsx("p",{className:"text-brand-neutral-light/50",children:"Brak treningów tego dnia"})}):e.jsx("div",{className:"flex-1 bg-brand-neutral-dark/50 border border-brand-depth rounded-xl p-4 overflow-y-auto custom-scrollbar",children:e.jsx(v.div,{className:"space-y-4",initial:"hidden",animate:"visible",variants:{visible:{transition:{staggerChildren:.05}}},children:e.jsx(S,{mode:"popLayout",children:t.map(c=>e.jsx(K,{entry:c,onRemoveEntry:b,onEdit:m},c.id))})})})}function q(t){const[b,r]=s.useState(!1),[m,c]=s.useState([]),[f,h]=s.useState(null),[o,p]=s.useState(!0),{user:a}=M();return s.useEffect(()=>{const w=setTimeout(async()=>{r(!0),h(null);try{if(!t||t.length<2){if(!a){c([]),p(!0);return}const{data:x,error:i}=await y.from("workout_logs").select("exercise:exercises(*)").eq("user_id",a.id).order("created_at",{ascending:!1}).limit(50);if(i)throw i;const g=new Set,l=[];x?.forEach(d=>{d.exercise&&!g.has(d.exercise.id)&&(g.add(d.exercise.id),l.push(d.exercise))}),c(l.slice(0,7)),p(!0)}else{const{data:x,error:i}=await y.from("exercises").select("*").ilike("name",`%${t}%`).limit(20);if(i)throw i;c(x||[]),p(!1)}}catch(x){console.error("Error searching exercises:",x),h(x.message)}finally{r(!1)}},300);return()=>clearTimeout(w)},[t,a]),{loading:b,hits:m,error:f,isRecent:o}}function Q({exercise:t,onCancel:b,onAdd:r,submitButtonText:m="Dodaj ćwiczenie"}){const[c,f]=s.useState(3),[h,o]=s.useState(10),[p,a]=s.useState(0),[n,w]=s.useState(0),[x,i]=s.useState(0),g=()=>{r({sets:t.type==="strength"||!t.type?c:1,reps:t.type==="strength"||!t.type?h:1,weight:t.type==="strength"||!t.type?p:0,duration:t.type==="cardio"||t.type==="stretching"?n:0,distance:t.type==="cardio"?x:0})},l=()=>{switch(t.type){case"cardio":return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col p-3 rounded-lg bg-brand-neutral-dark/90 border border-brand-depth",children:[e.jsx("label",{className:"text-xs font-bold text-brand-neutral-light/70 uppercase text-center mb-1",children:"Czas (min)"}),e.jsx("input",{type:"number",value:n,onChange:d=>w(Number(d.target.value)),className:"w-full bg-transparent text-center text-xl font-bold text-brand-accent-1 focus:outline-none",placeholder:"0"})]}),e.jsxs("div",{className:"flex flex-col p-3 rounded-lg bg-brand-neutral-dark/90 border border-brand-depth",children:[e.jsx("label",{className:"text-xs font-bold text-brand-neutral-light/70 uppercase text-center mb-1",children:"Dystans (km)"}),e.jsx("input",{type:"number",value:x,onChange:d=>i(Number(d.target.value)),className:"w-full bg-transparent text-center text-xl font-bold text-brand-accent-1 focus:outline-none",placeholder:"0"})]})]});case"stretching":return e.jsxs("div",{className:"flex flex-col p-3 rounded-lg bg-brand-neutral-dark/90 border border-brand-depth col-span-full",children:[e.jsx("label",{className:"text-xs font-bold text-brand-neutral-light/70 uppercase text-center mb-1",children:"Czas (min)"}),e.jsx("input",{type:"number",value:n,onChange:d=>w(Number(d.target.value)),className:"w-full bg-transparent text-center text-xl font-bold text-brand-accent-1 focus:outline-none",placeholder:"0"})]});case"strength":default:return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col p-3 rounded-lg bg-brand-neutral-dark/90 border border-brand-depth",children:[e.jsx("label",{className:"text-xs font-bold text-brand-neutral-light/70 uppercase text-center mb-1",children:"Serie"}),e.jsx("input",{type:"number",value:c,onChange:d=>f(Number(d.target.value)),className:"w-full bg-transparent text-center text-xl font-bold text-brand-accent-1 focus:outline-none"})]}),e.jsxs("div",{className:"flex flex-col p-3 rounded-lg bg-brand-neutral-dark/90 border border-brand-depth",children:[e.jsx("label",{className:"text-xs font-bold text-brand-neutral-light/70 uppercase text-center mb-1",children:"Powtórzenia"}),e.jsx("input",{type:"number",value:h,onChange:d=>o(Number(d.target.value)),className:"w-full bg-transparent text-center text-xl font-bold text-brand-accent-1 focus:outline-none"})]}),e.jsxs("div",{className:"flex flex-col p-3 rounded-lg bg-brand-neutral-dark/90 border border-brand-depth",children:[e.jsx("label",{className:"text-xs font-bold text-brand-neutral-light/70 uppercase text-center mb-1",children:"Ciężar (kg)"}),e.jsx("input",{type:"number",value:p,onChange:d=>a(Number(d.target.value)),className:"w-full bg-transparent text-center text-xl font-bold text-brand-accent-1 focus:outline-none"})]})]})}};return e.jsxs(v.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.2},className:"flex flex-col h-full p-4",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-brand-depth pb-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-brand-neutral-light",children:t.name}),e.jsx("p",{className:"text-xs text-brand-neutral-light/60 uppercase tracking-wider mt-1",children:t.type==="cardio"?"Cardio":t.type==="stretching"?"Rozciąganie":"Siłowe"})]}),e.jsx("button",{onClick:b,className:`flex items-center justify-center p-2 hover:bg-brand-depth/50 rounded-full transition-colors \r
                        text-brand-neutral-light/60 hover:text-brand-neutral-light cursor-pointer`,children:e.jsx(E,{})})]}),e.jsx("div",{className:`flex flex-col gap-3 mb-6 md:grid ${t.type==="strength"||!t.type?"md:grid-cols-3":t.type==="cardio"?"md:grid-cols-2":"md:grid-cols-1"}`,children:l()}),e.jsx(v.button,{onClick:g,whileHover:{scale:1.02},whileTap:{scale:.98},className:`mt-auto w-full py-4 bg-brand-accent-1 hover:bg-brand-accent-2 cursor-pointer text-white font-bold rounded-xl \r
                   shadow-lg hover:shadow-brand-accent-1/20 transition-all flex items-center justify-center gap-2 text-lg`,children:m})]},"details")}function T({onAddExercise:t,submitButtonText:b="Dodaj ćwiczenie",onCreateExercise:r}){const[m,c]=s.useState(""),{loading:f,hits:h,error:o,isRecent:p}=q(m),[a,n]=s.useState(null),w=x=>{a&&(t(a,x),n(null),c(""))};return e.jsx("div",{className:"flex flex-col h-full bg-brand-neutral-dark/20 overflow-hidden border border-brand-depth/50",children:e.jsx(S,{mode:"wait",children:a?e.jsx(Q,{exercise:a,onCancel:()=>n(null),onAdd:w,submitButtonText:b}):e.jsxs(v.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},className:"flex flex-col h-full",children:[e.jsxs("div",{className:"p-3 border-b border-brand-depth bg-brand-neutral-dark relative flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(_,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-brand-neutral-light/50"}),e.jsx("input",{type:"text",placeholder:"Szukaj ćwiczenia...",value:m,onChange:x=>c(x.target.value),className:`w-full pl-10 pr-4 py-3 rounded-lg bg-brand-depth/30 border border-brand-depth/50 text-brand-neutral-light \r
                            placeholder-brand-neutral-light/30 focus:outline-none focus:ring-1 focus:ring-brand-accent-1 focus:border-brand-accent-1 \r
                            transition-all`})]}),e.jsx("button",{onClick:r,className:"bg-brand-accent-1 hover:bg-brand-accent-2 text-white p-3 rounded-lg transition-colors shadow-lg cursor-pointer",title:"Stwórz nowe ćwiczenie",children:"+"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-2 space-y-1 relative",children:[e.jsx(S,{children:f&&m.length>=2&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 z-10 flex items-center justify-center bg-brand-neutral-dark/60 backdrop-blur-xs",children:e.jsx("p",{className:"text-brand-neutral-light/70 font-medium animate-pulse",children:"Szukanie..."})})}),o&&e.jsxs("p",{className:"text-red-400 text-center py-4 text-sm",children:["Błąd: ",o]}),h.map(x=>e.jsx(v.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},whileHover:{scale:1.01},whileTap:{scale:.99},onClick:()=>n(x),className:`p-4 rounded-lg bg-brand-neutral-dark border 
                            cursor-pointer transition-colors group shadow-sm hover:shadow-md hover:border-brand-accent-3/30
                            hover:bg-brand-neutral-dark/90 ${p?"border-brand-accent-1/20 bg-brand-accent-1/5":"border-brand-depth/50"}`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:`font-medium text-brand-neutral-light group-hover:text-brand-accent-3 \r
                                    transition-colors truncate flex-1 min-w-0 mr-2`,children:x.name}),(()=>{let i=x.type,g="text-brand-neutral-dark/80 bg-brand-depth";return x.type==="strength"?i=[{label:"Klatka",value:"chest"},{label:"Plecy",value:"back"},{label:"Nogi",value:"legs"},{label:"Barki",value:"shoulders"},{label:"Ramiona",value:"arms"},{label:"Brzuch",value:"core"},{label:"Cardio",value:"cardio"}].find(d=>d.value===x.muscle_group)?.label||x.muscle_group:x.type==="cardio"?(i="Cardio",g="bg-brand-accent-1 text-brand-neutral-darker"):x.type==="stretching"&&(i="Rozciąganie",g="bg-brand-accent-2 text-brand-neutral-darker"),e.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded-full uppercase tracking-wide ${g}`,children:i})})()]})},x.id)),!f&&!p&&h.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-brand-neutral-light/40",children:[e.jsx(_,{className:"text-4xl mb-2 opacity-20"}),e.jsx("p",{className:"text-sm",children:"Brak wyników"})]}),!f&&p&&h.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-brand-neutral-light/30",children:[e.jsx(_,{className:"text-5xl mb-3 opacity-20"}),e.jsx("p",{className:"text-sm",children:"Wpisz nazwę aby wyszukać"})]})]})]},"search")})})}function I(t){const{user:b}=M(),[r,m]=s.useState(!1),[c,f]=s.useState([]),[h,o]=s.useState(null),p=async()=>{if(b){m(!0),o(null);try{let i=y.from("workout_sets").select(`
          *,
          items:workout_set_items (
            *,
            exercise:exercises (*)
          )
        `).order("created_at",{ascending:!1});t&&(i=i.ilike("name",`%${t}%`));const{data:g,error:l}=await i;if(l)throw l;f(g||[])}catch(i){console.error("Error searching sets:",i),o(i.message)}finally{m(!1)}}};s.useEffect(()=>{const i=setTimeout(p,300);return()=>clearTimeout(i)},[t,b]);const a=()=>{p()};return{loading:r,sets:c,error:h,refreshSets:a,createSet:async(i,g,l)=>{if(!b)throw new Error("Użytkownik nie jest zalogowany");const{data:d,error:j}=await y.from("workout_sets").insert({name:i,description:g,created_by:b.id}).select().single();if(j)throw j;if(l.length>0){const k=l.map((u,N)=>({set_id:d.id,exercise_id:u.exercise.id,order_index:N,sets:u.sets,reps:u.reps,weight_kg:u.weight,duration_min:u.duration})),{error:z}=await y.from("workout_set_items").insert(k);if(z)throw z}return a(),d},deleteSet:async i=>{const{error:g}=await y.from("workout_sets").delete().eq("id",i);if(g)throw g;a()},updateSet:async(i,g,l,d)=>{if(!b)throw new Error("Użytkownik nie jest zalogowany");const{error:j}=await y.from("workout_sets").update({name:g,description:l}).eq("id",i);if(j)throw j;const{error:k}=await y.from("workout_set_items").delete().eq("set_id",i);if(k)throw k;if(d.length>0){const z=d.map((N,C)=>({set_id:i,exercise_id:N.exercise.id,order_index:C,sets:N.sets,reps:N.reps,weight_kg:N.weight,duration_min:N.duration})),{error:u}=await y.from("workout_set_items").insert(z);if(u)throw u}a()}}}function $({onClose:t,onSuccess:b,initialData:r}){const{createSet:m,updateSet:c}=I(""),[f,h]=s.useState("details"),[o,p]=s.useState(r?.name||""),[a,n]=s.useState(r?.description||""),[w,x]=s.useState([]),[i,g]=s.useState(!1),[l,d]=s.useState(null);s.useEffect(()=>{r?.items&&x(r.items.map(u=>({id:u.id||Math.random().toString(36).substr(2,9),exercise:u.exercise,sets:u.sets,reps:u.reps,weight:u.weight_kg||0,duration:u.duration_min||0,distance:u.distance_km||0})))},[r]);const j=(u,N)=>{const C={id:Math.random().toString(36).substr(2,9),exercise:u,sets:N.sets,reps:N.reps,weight:N.weight,duration:N.duration,distance:N.distance};x(B=>[...B,C]),h("details")},k=u=>{x(N=>N.filter(C=>C.id!==u))},z=async()=>{if(!o.trim()){d("Nazwa zestawu jest wymagana");return}if(w.length===0){d("Dodaj przynajmniej jedno ćwiczenie");return}g(!0),d(null);try{r?await c(r.id,o,a,w):await m(o,a,w),b(),t()}catch(u){console.error("Failed to save set:",u),d("Nie udało się zapisać zestawu: "+u.message)}finally{g(!1)}};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-brand-neutral-dark/60",children:e.jsxs(v.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:`bg-brand-neutral-dark border border-brand-depth w-full max-w-lg h-[80vh] rounded-2xl \r
                  shadow-2xl flex flex-col overflow-hidden`,children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-brand-depth bg-brand-neutral-dark/50",children:[e.jsx("h2",{className:"text-xl font-bold text-brand-neutral-light",children:f==="details"?r?"Edytuj zestaw ćwiczeń":"Stwórz nowy zestaw ćwiczeń":"Dodaj ćwiczenie do zestawu"}),e.jsx("button",{onClick:f==="details"?t:()=>h("details"),className:`p-1 cursor-pointer hover:bg-brand-depth rounded-full transition-colors hover:text-brand-neutral-dark \r
                    text-brand-neutral-light flex items-center justify-center`,children:e.jsx(E,{})})]}),e.jsx("div",{className:"flex-1 overflow-hidden relative",children:e.jsx(S,{mode:"wait",children:f==="details"?e.jsxs(v.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},className:"flex flex-col h-full p-4 overflow-y-auto custom-scrollbar",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-brand-neutral-light/70 uppercase mb-1",children:"Nazwa zestawu"}),e.jsx("input",{type:"text",value:o,onChange:u=>p(u.target.value),placeholder:"np. Rozgrzewka A",className:`w-full px-4 py-2 rounded-lg bg-brand-depth/30 border border-brand-depth/50 text-brand-neutral-light \r
                                focus:outline-none focus:border-brand-accent-1 transition-colors`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-brand-neutral-light/70 uppercase mb-1",children:"Opis (opcjonalnie)"}),e.jsx("textarea",{value:a,onChange:u=>n(u.target.value),placeholder:"Krótki opis zestawu...",rows:2,className:`w-full px-4 py-2 rounded-lg bg-brand-depth/30 border border-brand-depth/50 text-brand-neutral-light \r
                                focus:outline-none focus:border-brand-accent-1 resize-none transition-colors`})]}),e.jsxs("div",{className:"pt-2",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("label",{className:"block text-xs font-bold text-brand-neutral-light/70 uppercase",children:["Ćwiczenia (",w.length,")"]}),e.jsx("button",{onClick:()=>h("add-exercise"),className:`text-xs font-bold text-brand-accent-1 hover:text-brand-accent-2 cursor-pointer transition-colors \r
                                  uppercase tracking-wide`,children:"+ Dodaj ćwiczenie"})]}),e.jsxs("div",{className:"space-y-2 min-h-[100px] bg-brand-depth/10 rounded-lg p-2 border border-brand-depth/30",children:[w.length===0&&e.jsx("p",{className:"text-center text-brand-neutral-light/30 text-sm py-8",children:"Brak ćwiczeń. Dodaj pierwsze ćwiczenie!"}),w.map((u,N)=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-brand-neutral-dark border border-brand-depth rounded-lg group",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-brand-neutral-light/30 font-bold text-xs w-4",children:[N+1,"."]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-brand-neutral-light",children:u.exercise.name}),e.jsx("p",{className:"text-xs text-brand-neutral-light/60",children:u.exercise.type==="cardio"?`${u.duration} min | ${u.distance} km`:u.exercise.type==="stretching"?`${u.duration} min`:`${u.sets} x ${u.reps} ${u.weight>0?`| ${u.weight}kg`:""}`})]})]}),e.jsx("button",{onClick:()=>k(u.id),className:`text-brand-neutral-light/30 hover:text-red-400 transition-colors p-1 hover:bg-red-400/10 \r
                                      flex items-center justify-center rounded-full cursor-pointer`,children:e.jsx(P,{})})]},u.id))]})]}),l&&e.jsx("p",{className:"text-red-400 text-sm text-center bg-red-400/10 p-2 rounded",children:l})]}),e.jsx("div",{className:"mt-auto pt-4",children:e.jsx("button",{onClick:z,disabled:i,className:`w-full py-3 bg-brand-accent-1 hover:bg-brand-accent-2 disabled:opacity-50 disabled:cursor-not-allowed\r
                             text-white font-bold rounded-xl shadow-lg transition-all cursor-pointer`,children:i?"Zapisywanie...":r?"Zapisz zmiany":"Utwórz zestaw"})})]},"details"):e.jsx(v.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.2},className:"flex flex-col h-full",children:e.jsx(T,{onAddExercise:j,submitButtonText:"Dodaj do zestawu"})},"add-exercise")})})]})})}function Y({onAddSet:t,onCreateSet:b}){const[r,m]=s.useState(""),{loading:c,sets:f,error:h,refreshSets:o,deleteSet:p}=I(r),[a,n]=s.useState(null),[w,x]=s.useState(!1),[i,g]=s.useState(!1),l=()=>{a&&(t(a),n(null),m(""))},d=async()=>{if(a)try{await p(a.id),n(null),g(!1)}catch(j){console.error("Failed to delete set",j)}};return e.jsxs("div",{className:"flex flex-col h-full bg-brand-neutral-dark/20 overflow-hidden border border-brand-depth/50",children:[e.jsx(S,{mode:"wait",children:a?e.jsxs(v.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.2},className:"flex flex-col h-full p-4",children:[e.jsxs("div",{className:"flex items-start justify-between border-b border-brand-depth pb-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-brand-neutral-light",children:a.name}),e.jsxs("p",{className:"text-xs text-brand-neutral-light/60 uppercase tracking-wider mt-1",children:["Liczba ćwiczeń: ",a.items?.length||0]}),e.jsx("p",{className:"text-xs text-brand-neutral-light/60 uppercase tracking-wider mt-1",children:a.description})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsx("button",{onClick:()=>n(null),className:`text-sm text-brand-neutral-light/60 hover:text-brand-neutral-light hover:underline transition-all \r
                            cursor-pointer p-1`,children:"Wróć"}),e.jsxs("div",{className:"ml-4 flex sm:flex-row flex-col gap-2",children:[e.jsx("button",{onClick:()=>x(!0),className:`flex items-center justify-center p-1.5 rounded-lg bg-brand-depth/40 text-brand-neutral-light/70 \r
                    hover:text-brand-accent-3 hover:bg-brand-accent-3/10 transition-colors cursor-pointer`,title:"Edytuj zestaw",children:e.jsx(D,{className:"scale-75"})}),e.jsx("button",{onClick:()=>g(!0),className:`flex items-center justify-center p-1.5 rounded-lg bg-brand-depth/40 text-brand-neutral-light/70 \r
                    hover:text-red-400 hover:bg-red-400/10 transition-colors cursor-pointer`,title:"Usuń zestaw",children:e.jsx(P,{className:"scale-75"})})]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto mb-4 custom-scrollbar",children:e.jsx("div",{className:"space-y-2",children:a.items?.map((j,k)=>e.jsx("div",{className:"p-3 rounded bg-brand-depth/20 border border-brand-depth/40 flex justify-between items-center",children:e.jsxs("div",{className:"flex gap-3 items-center",children:[e.jsxs("span",{className:"text-brand-neutral-light/30 font-bold text-xs w-4",children:[k+1,"."]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-brand-neutral-light font-medium text-sm",children:j.exercise?.name}),e.jsx("p",{className:"text-brand-neutral-light/60 text-xs",children:j.exercise?.type==="strength"?`${j.sets} x ${j.reps} • ${j.weight_kg||0}kg`:`${j.sets} serii • ${j.duration_min||j.reps} min/powt`})]})]})},j.id))})}),e.jsx(v.button,{onClick:l,whileHover:{scale:1.02},whileTap:{scale:.98},className:`mt-auto w-full py-3.5 bg-brand-accent-1 hover:bg-brand-accent-2 cursor-pointer text-white font-bold rounded-xl \r
                         shadow-lg hover:shadow-brand-accent-1/20 transition-all flex items-center justify-center gap-2`,children:"Dodaj zestaw treningowy"})]},"details"):e.jsxs(v.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},className:"flex flex-col h-full",children:[e.jsxs("div",{className:"p-3 border-b border-brand-depth bg-brand-neutral-dark relative flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(_,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-brand-neutral-light/50"}),e.jsx("input",{type:"text",placeholder:"Szukaj zestawu...",value:r,onChange:j=>m(j.target.value),className:`w-full pl-10 pr-4 py-3 rounded-lg bg-brand-depth/30 border border-brand-depth/50 text-brand-neutral-light \r
                            placeholder-brand-neutral-light/30 focus:outline-none focus:ring-1 focus:ring-brand-accent-1 focus:border-brand-accent-1 \r
                            transition-all`})]}),e.jsx("button",{onClick:b,className:"bg-brand-accent-1 hover:bg-brand-accent-2 text-white p-3 rounded-lg transition-colors shadow-lg",title:"Stwórz nowy zestaw",children:"+"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-2 space-y-2",children:[c&&e.jsx("p",{className:"text-brand-neutral-light/50 text-center py-8 text-sm animate-pulse",children:"Ładowanie..."}),h&&e.jsxs("p",{className:"text-red-400 text-center py-4 text-sm",children:["Błąd: ",h]}),f.map(j=>e.jsx(v.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},whileHover:{scale:1.01},whileTap:{scale:.99},onClick:()=>n(j),className:`p-4 rounded-lg bg-brand-neutral-dark border border-brand-depth/50 \r
                            cursor-pointer transition-colors group shadow-sm hover:shadow-md hover:border-brand-accent-3/30\r
                            hover:bg-brand-neutral-dark/90`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-brand-neutral-light group-hover:text-brand-accent-3 transition-colors",children:j.name}),j.description&&e.jsx("p",{className:"text-xs text-brand-neutral-light/50 mt-1 line-clamp-1",children:j.description})]}),e.jsxs("span",{className:"text-xs font-bold text-brand-neutral-dark/80 bg-brand-depth px-2 py-1 rounded-full uppercase tracking-wide whitespace-nowrap",children:[j.items?.length||0," ćw."]})]})},j.id)),!c&&r&&f.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-brand-neutral-light/40",children:[e.jsx(_,{className:"text-4xl mb-2 opacity-20"}),e.jsx("p",{className:"text-sm",children:"Brak wyników"})]}),!c&&!r&&f.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-brand-neutral-light/30",children:[e.jsx("p",{className:"text-sm",children:"Brak zestawów"}),e.jsx("button",{onClick:b,className:"mt-2 text-brand-accent-1 hover:underline cursor-pointer text-sm",children:"Stwórz swój pierwszy zestaw"})]})]})]},"search")}),w&&a&&e.jsx($,{initialData:a,onClose:()=>x(!1),onSuccess:()=>{o(),n(null),x(!1)}}),e.jsx(R,{isOpen:i,onClose:()=>g(!1),onConfirm:d,title:"Usuń zestaw",description:e.jsxs("p",{children:["Czy na pewno chcesz usunąć zestaw"," ",e.jsx("strong",{className:"text-brand-neutral-light",children:a?.name}),"?"]})})]})}const J=[{label:"Klatka",value:"chest"},{label:"Plecy",value:"back"},{label:"Nogi",value:"legs"},{label:"Barki",value:"shoulders"},{label:"Ramiona",value:"arms"},{label:"Brzuch",value:"core"},{label:"Cardio",value:"cardio"}],V=[{label:"Siłowe",value:"strength"},{label:"Cardio",value:"cardio"},{label:"Rozciąganie",value:"stretching"}];function X({onClose:t,onCreated:b}){const{user:r}=M(),[m,c]=s.useState(""),[f,h]=s.useState("chest"),[o,p]=s.useState("strength"),[a,n]=s.useState(!1),[w,x]=s.useState(null),i=async g=>{if(g.preventDefault(),!r||!m)return;n(!0),x(null);const{error:l}=await y.from("exercises").insert({name:m,muscle_group:o==="strength"?f:o,type:o,created_by:r.id});n(!1),l?(console.error("Error creating custom exercise",l),x("Nie udało się utworzyć ćwiczenia: "+l.message)):(c(""),b(),t())};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-brand-neutral-dark/60",children:e.jsxs(v.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:`bg-brand-neutral-dark border border-brand-depth w-full max-w-lg rounded-2xl \r
                  shadow-2xl flex flex-col`,children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-brand-depth bg-brand-neutral-dark/50 rounded-t-2xl",children:[e.jsx("h2",{className:"text-xl font-bold text-brand-neutral-light",children:"Stwórz własne ćwiczenie"}),e.jsx("button",{onClick:t,className:`p-1 cursor-pointer hover:bg-brand-depth rounded-full transition-colors hover:text-brand-neutral-dark \r
                    text-brand-neutral-light flex items-center justify-center`,children:e.jsx(E,{})})]}),e.jsxs("form",{onSubmit:i,className:"flex flex-col gap-5 p-4",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-sm text-brand-neutral-light font-medium",children:"Nazwa ćwiczenia"}),e.jsx("input",{type:"text",value:m,onChange:g=>c(g.target.value),required:!0,placeholder:"np. Wyciskanie hantli",className:`p-3 rounded-lg bg-brand-neutral-dark border border-brand-depth text-brand-neutral-light \r
                         placeholder-brand-neutral-light/30 focus:outline-none focus:ring-1 focus:ring-brand-accent-1 \r
                         focus:border-brand-accent-1 transition-all`})]}),e.jsxs("div",{className:`grid grid-cols-1 ${o==="strength"?"sm:grid-cols-2":""} gap-4`,children:[o==="strength"&&e.jsx(O,{label:"Partia mięśniowa",value:f,onChange:h,options:J}),e.jsx(O,{label:"Typ",value:o,onChange:g=>p(g),options:V})]}),w&&e.jsx("p",{className:"text-red-400 text-sm text-center bg-red-400/10 p-2 rounded",children:w}),e.jsx(v.button,{type:"submit",disabled:a,whileHover:{scale:1.02},whileTap:{scale:.98},className:`mt-4 w-full py-3 bg-brand-accent-1 hover:bg-brand-accent-2 text-white font-bold rounded-lg \r
                       transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 shadow-lg \r
                       cursor-pointer hover:shadow-brand-accent-1/20`,children:a?e.jsxs(e.Fragment,{children:[e.jsx(U,{className:"animate-spin"})," Zapisywanie..."]}):"Stwórz ćwiczenie"})]})]})})}function ee({onAddExercise:t}){const[b,r]=s.useState("exercises"),[m,c]=s.useState(!1),[f,h]=s.useState(!1),o=a=>`flex-1 text-center px-2 sm:px-4 py-2 rounded-t-md transition-colors relative -mb-px ${a?"bg-brand-neutral-dark/50 text-brand-neutral-light border-x border-t border-brand-depth border-b-transparent font-bold":"text-brand-neutral-dark hover:bg-brand-accent-3 border-b border-brand-depth cursor-pointer"}`,p=a=>{a.items?.forEach(n=>{n.exercise&&t(n.exercise,{sets:n.sets,reps:n.reps,weight:n.weight_kg||0,duration:n.duration_min||0,distance:n.distance_km||0})})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"rounded-xl border border-brand-depth bg-brand-neutral-dark/50 p-4 flex-1 flex flex-col min-h-0",children:[e.jsxs("div",{className:"flex border-b border-brand-depth",children:[e.jsx("button",{onClick:()=>r("exercises"),className:o(b==="exercises"),children:"Ćwiczenia"}),e.jsx("button",{onClick:()=>r("sets"),className:o(b==="sets"),children:"Zestawy"})]}),b==="exercises"?e.jsx("div",{className:"flex flex-col h-full overflow-hidden",children:e.jsx("div",{className:"flex-1 overflow-hidden relative",children:e.jsx(S,{mode:"wait",children:e.jsx(T,{onAddExercise:t,onCreateExercise:()=>h(!0)},"search")})})}):e.jsx("div",{className:"flex-1 overflow-hidden relative",children:e.jsx(Y,{onCreateSet:()=>c(!0),onAddSet:p})})]}),e.jsxs(S,{children:[m&&e.jsx($,{onClose:()=>c(!1),onSuccess:()=>c(!1)}),f&&e.jsx(X,{onClose:()=>h(!1),onCreated:()=>h(!1)})]})]})}const te=[{id:1,name:"Poniedziałek"},{id:2,name:"Wtorek"},{id:3,name:"Środa"},{id:4,name:"Czwartek"},{id:5,name:"Piątek"},{id:6,name:"Sobota"},{id:0,name:"Niedziela"}];function ae({onClose:t}){const{weeklyPlan:b,updateScheduledDay:r,loading:m}=L(),{sets:c,loading:f,refreshSets:h}=I("");return s.useEffect(()=>{h()},[]),e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:e.jsxs(v.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-brand-neutral-dark border border-brand-depth rounded-2xl w-full max-w-2xl max-h-[90vh] flex flex-col shadow-2xl",children:[e.jsxs("div",{className:"p-6 border-b border-brand-depth flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl lg:text-2xl font-bold text-brand-neutral-light",children:"Plan tygodniowy"}),e.jsx("button",{onClick:t,className:`flex items-center justify-center p-2 hover:bg-brand-depth/50 rounded-full transition-colors \r
                text-brand-neutral-light/60 hover:text-brand-neutral-light cursor-pointer`,children:e.jsx(E,{})})]}),e.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar space-y-4",children:m||f?e.jsx("div",{className:"py-10 text-center text-brand-neutral-light/50",children:"Ładowanie..."}):e.jsx("div",{className:"grid grid-cols-1 gap-3",children:te.map(o=>{const p=b.find(a=>a.scheduled_day===o.id);return e.jsxs("div",{className:"flex items-center gap-4 bg-brand-depth/20 p-3 rounded-xl border border-brand-depth/40 hover:border-brand-depth transition-colors",children:[e.jsx("div",{className:"truncate w-14 lg:w-28 font-medium text-brand-neutral-light",children:o.name}),e.jsx("div",{className:"flex-1",children:e.jsxs("select",{value:p?.id||"",onChange:a=>{const n=a.target.value;!n&&p?r(p.id,null):n&&r(n,o.id)},className:`w-full bg-brand-neutral-dark border border-brand-depth/60 rounded-lg px-3 py-2 text-sm text-brand-neutral-light focus:border-brand-accent-1 \r
                                focus:ring-1 focus:ring-brand-accent-1 outline-none`,children:[e.jsx("option",{value:"",children:"Brak planu"}),c.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})})]},o.id)})})}),e.jsx("div",{className:"p-6 border-t border-brand-depth flex justify-end",children:e.jsx("button",{onClick:t,className:"px-6 py-2 bg-brand-accent-1 hover:bg-brand-accent-2 text-white font-bold rounded-xl transition-all shadow-lg cursor-pointer",children:"Gotowe"})})]})})}function re({entries:t,selectedDate:b}){const[r,m]=s.useState(!1),{getDayPlan:c,refreshPlan:f}=L(),[h,o]=s.useState(null),p=s.useMemo(()=>{const n=b.getDay();return n===0?0:n},[b]);s.useEffect(()=>{f()},[]),s.useEffect(()=>{const n=c(p);o(n)},[p,c]);const a=s.useMemo(()=>{const n=new Set(t.map(l=>l.exercise_id)).size,w=t.reduce((l,d)=>l+(d.sets||0),0),x=t.reduce((l,d)=>l+(d.sets||0)*(d.reps||0)*(d.weight_kg||0),0),i=t.reduce((l,d)=>l+(d.distance_km||0),0),g=t.length>0?t[0]:null;return{workouts:n,sets:w,volume:x,distance_km:i,lastSet:g}},[t]);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-brand-neutral-dark/40 border border-brand-depth rounded-2xl p-6 relative",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs(v.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.4},className:"bg-brand-neutral-dark p-4 border border-brand-depth rounded-xl h-full flex flex-col justify-center min-h-[100px]",children:[e.jsx("p",{className:"text-xs text-brand-neutral-light/70 uppercase tracking-wide mb-2",children:"Ostatnia seria"}),a.lastSet?e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-lg font-bold text-brand-neutral-light line-clamp-1",children:a.lastSet.exercise?.name||"Nieznane ćwiczenie"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"text-xs text-brand-accent-1 bg-brand-accent-1/10 px-2 py-0.5 rounded",children:new Date(a.lastSet.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),e.jsxs("span",{className:"text-sm text-brand-secondary",children:[a.lastSet.weight_kg," kg x ",a.lastSet.reps]})]})]}):e.jsx("span",{className:"text-brand-neutral-light/50 italic text-sm",children:"Brak aktywności"})]}),e.jsx(v.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.4},className:"bg-brand-neutral-dark p-4 border border-brand-depth rounded-xl h-full flex flex-col justify-center min-h-[100px]",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-xs text-brand-neutral-light/60 uppercase tracking-widest mb-1",children:[b.toLocaleDateString("pl-PL",{weekday:"long"}),": PLAN"]}),e.jsx("button",{onClick:()=>m(!0),className:`flex items-center justify-center text-brand-neutral-light hover:text-white transition-all hover:bg-brand-depth/50 \r
                            p-1 rounded-full cursor-pointer`,title:"Zmień plan",children:e.jsx(D,{className:"scale-80"})})]}),h?e.jsxs("div",{className:"text-center px-6",children:[e.jsx("h3",{className:"text-xl lg:text-2xl font-bold text-brand-accent-2 mb-2 line-clamp-2",children:h.name}),e.jsxs("span",{className:"text-xs text-brand-neutral-light/50 bg-brand-depth/50 px-2 py-1 rounded-full",children:["Liczba ćwiczeń: ",h.items?.length||0]})]}):e.jsx("span",{className:"text-brand-neutral-light/30 italic px-4 text-center",children:"Brak planu"})]})}),e.jsx(v.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},className:"bg-brand-neutral-dark p-4 border border-brand-depth rounded-xl flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-brand-neutral-light/70 uppercase tracking-wide mb-1",children:"Ćwiczenia • Serie"}),e.jsxs("p",{className:"text-2xl font-bold text-brand-accent-1",children:[a.workouts," ",e.jsx("span",{className:"text-brand-neutral-light/50",children:"•"})," ",e.jsx("span",{className:"text-brand-accent-3",children:a.sets})]})]})}),e.jsx(v.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},className:"bg-brand-neutral-dark p-4 border border-brand-depth rounded-xl flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-brand-neutral-light/70 uppercase tracking-wide mb-1",children:"Objętość • Przebieg"}),e.jsxs("p",{className:"text-2xl font-bold text-brand-accent-1",children:[e.jsxs("span",{className:"text-brand-accent-3",children:[a.volume," kg"]})," ",e.jsx("span",{className:"text-brand-neutral-light/50",children:"•"})," ",e.jsxs("span",{className:"text-brand-accent-1",children:[a.distance_km," km"]})]})]})})]})}),e.jsx(S,{children:r&&e.jsx(ae,{onClose:()=>m(!1)})})]})}function oe(){M();const[t,b]=s.useState(new Date),{entries:r,isLoading:m,addEntry:c,removeEntry:f,editEntry:h}=G(t),o=async(a,n)=>{await c(a,n)},p=async a=>{await f(a)};return e.jsxs(v.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"flex flex-col lg:flex-row gap-6 py-2 sm:py-4 h-full lg:h-[calc(100vh-1rem)] w-full overflow-hidden",children:[e.jsxs("div",{className:"lg:w-1/3 w-full h-full flex flex-col gap-4 overflow-hidden order-1",children:[e.jsx(F,{selectedDate:t,onDateChange:b,format:"day"}),e.jsx(Z,{entries:r,onRemoveEntry:p,isLoading:m,onEdit:h})]}),e.jsxs("div",{className:"lg:w-2/3 w-full h-full flex flex-col gap-4 overflow-hidden order-1 lg:order-2",children:[e.jsx(re,{entries:r,selectedDate:t}),e.jsx(ee,{onAddExercise:o})]})]})}export{oe as default};
